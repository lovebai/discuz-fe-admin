(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{"2HUq":function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return n}));var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"annex-set-box"},[s("Card",{attrs:{header:"支持的图片扩展名："}},[s("CardRow",{attrs:{description:"多个请用,隔开，例如 png,gif,jpg,jpeg,heic"}},[s("el-input",{model:{value:e.picture,callback:function(t){e.picture=t},expression:"picture"}})],1)],1),e._v(" "),s("Card",{attrs:{header:"支持的文件扩展名："}},[s("CardRow",{attrs:{description:"多个请用,隔开，例如 doc,docx,pdf,zip"}},[s("el-input",{model:{value:e.fileExtension,callback:function(t){e.fileExtension=t},expression:"fileExtension"}})],1)],1),e._v(" "),s("Card",{attrs:{header:"支持的最大尺寸："}},[s("CardRow",{attrs:{description:"单位：MB"},scopedSlots:e._u([{key:"tail",fn:function(){return[s("a",{staticStyle:{"margin-left":"15px"},attrs:{href:"https://discuz.com/manual-admin/2.html#_2-5-%E9%99%84%E4%BB%B6%E8%AE%BE%E7%BD%AE",target:"_blank"}},[e._v("附件尺寸设置指南")])]},proxy:!0}])},[s("el-input",{attrs:{type:"number"},nativeOn:{"!blur":function(t){return e.onblurFun.apply(null,arguments)}},model:{value:e.maximumSize,callback:function(t){e.maximumSize=t},expression:"maximumSize"}})],1)],1),e._v(" "),s("Card",{staticClass:"annex-set-box__copy",attrs:{header:"用户一天内可下载附件次数："}},[s("CardRow",[s("el-radio",{attrs:{label:"1"},model:{value:e.restrictionsOn,callback:function(t){e.restrictionsOn=t},expression:"restrictionsOn"}},[e._v("不限制")]),e._v(" "),s("el-radio",{attrs:{label:"2"},model:{value:e.restrictionsOn,callback:function(t){e.restrictionsOn=t},expression:"restrictionsOn"}},[e._v("\n        自定义\n      ")]),e._v(" "),s("el-input",{staticClass:"elinput",staticStyle:{height:"36PX",width:"100PX"},attrs:{type:"number",size:"small"},on:{input:e.downloadsNumInput},model:{value:e.downloads,callback:function(t){e.downloads=t},expression:"downloads"}}),e._v("次\n      "),s("span",{staticClass:"annex-set-box__copy-span"},[e._v("如果在用户设置中开启了游客可下载附件权限，则游客下载不受次数限制")])],1)],1),e._v(" "),s("Card",{staticClass:"footer-btn"},[s("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.submi}},[e._v("提交")])],1)],1)},n=[]},"8ss3":function(e,t,s){"use strict";s.r(t);var i=s("2HUq"),n=s("cabW");for(var r in n)["default"].indexOf(r)<0&&function(e){s.d(t,e,(function(){return n[e]}))}(r);var a=s("KHd+"),o=Object(a.a)(n.default,i.a,i.b,!1,null,null,null);t.default=o.exports},Bouk:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(s("4gYi")),n=r(s("pNQN"));function r(e){return e&&e.__esModule?e:{default:e}}t.default={data:function(){return{picture:"",fileExtension:"",maximumSize:"",restrictionsOn:"",downloads:""}},created:function(){this.annexSet()},methods:{annexSet:function(){var e=this;this.appFetch({url:"forum_get_v3",method:"get",data:{}}).then((function(t){if(t.errors)e.$message.error(t.errors[0].code);else{if(0!==t.Code)return void e.$message.error(t.Message);var s=t.Data;e.picture=s.setAttach.supportImgExt,e.fileExtension=s.setAttach.supportFileExt,e.maximumSize=s.setAttach.supportMaxSize,Number(s.setAttach.supportMaxDownloadNum)>0?(e.restrictionsOn="2",e.downloads=Number(s.setAttach.supportMaxDownloadNum)):(e.restrictionsOn="1",e.downloads="")}}))},onblurFun:function(){this.maximumSize>100&&this.$message("最大尺寸不能超过100MB")},submi:function(){var e=this,t=/^[0-9]*$/,s=this.picture,i=this.fileExtension,n=this.maximumSize;if(s)if(i)if(n)if(n>100)this.$message.error("最大尺寸不能超过100MB");else if(/^\d+$|^\d+[.]?\d+$/.test(n))if(t.test(n)){if("2"===this.restrictionsOn){if(this.downloads<=0||""===this.downloads)return void this.$message.error("下载次数请输入大于0的正整数");if(!t.test(this.downloads))return void this.$message.error("下载次数请输入大于0的正整数")}this.appFetch({url:"settings_post_v3",method:"post",data:{data:[{key:"support_img_ext",value:this.picture,tag:"default"},{key:"support_file_ext",value:this.fileExtension,tag:"default"},{key:"support_max_size",value:this.maximumSize,tag:"default"},{key:"support_max_download_num",value:"1"===this.restrictionsOn?0:this.downloads,tag:"default"}]}}).then((function(t){if(t.errors)e.$message.error(t.errors[0].code);else{if(0!==t.Code)return void e.$message.error(t.Message);e.$message({message:"提交成功",type:"success"}),e.annexSet()}})).catch((function(e){}))}else this.$message.error("请输入正确的支持最大尺寸格式");else this.$message.error("请输入正确的支持最大尺寸格式");else this.$message.error("请您输入支持的最大尺寸");else this.$message.error("请您输入文件扩展名");else this.$message.error("请您输入图片扩展名")}},components:{Card:i.default,CardRow:n.default}}},XxXD:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(s("QbLZ")),n=r(s("Bouk"));function r(e){return e&&e.__esModule?e:{default:e}}s("lpfh"),t.default=(0,i.default)({name:"annex-set-view"},n.default)},cabW:function(e,t,s){"use strict";s.r(t);var i=s("XxXD"),n=s.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){s.d(t,e,(function(){return i[e]}))}(r);t.default=n.a}}]);